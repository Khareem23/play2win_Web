<% layout('layouts/base') -%>

  <div class="row bg">
<div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                  <div class="x_title">
                    <h2>Match Making Details </h2>
                                        
                    <div class="clearfix"></div>
                  </div>

                  <div class="x_content">
                    <div class="table-responsive">
                        <p id="date_filter" hidden>
                            <span id="date-label-from" class="date-label">From </span>:<input type="text" id="min" name="min" class="date_range_filter date">&nbsp;&nbsp;&nbsp;<span id="date-label-to" class="date-label">To </span>:<input type="text" id="max" name="max" class="date_range_filter date">
                        </p>
                        <table
                        id="datatable"
                        class="table table-striped table-bordered bulk_action"
                      >
                        <thead>
                          <tr class="headings">
                            
                            <th class="column-title1">Id</th>
                            <th class="column-title1">Players</th>
                            <th class="column-title1">Bet Amount</th>
                            <th class="column-title1">Total Bet Amount</th>
                            <th class="column-title1">Amount Charged</th>
                            <th class="column-title1">Winner</th>
                            <th class="column-title1">Played On</th>
                          </tr>
                        </thead>

                        <tbody>
                          <%
                          if(mm_data.length >0){
                            mm_data.forEach(function(mm){ 
                              
                            var players = JSON.parse(mm.players)
                            var ln = players.length
                            var WinnerAmount = mm.bet_amount * ln - mm.bet_amount * ln * (mm.charge_percentage / 100)
                           var amountCharged = ln*mm.bet_amount-WinnerAmount 
                              %>
                          <tr class="even pointer">
                            <td class=" "><%=mm.id%></td>
                            <td class=" "><%=mm.players%></td>
                            <td class=" "><%=mm.bet_amount%></td>
                            <td class=" "><%=ln*mm.bet_amount%></td>
                            <td class=" "><%=amountCharged%></td>
                            <td><%=mm.winnerEmail%></td>
                             <td> <%=new Date(mm.date_created).toDateString()%></td>
                          </tr>
                          <% }) }%>
                        </tbody>
                      </table>
                    </div>
							
                  </div>
                </div>
              </div>
          </div>
